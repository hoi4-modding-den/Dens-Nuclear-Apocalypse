XFR_centre_crisis_cat = {
	XFR_centre_hunt_down_mutants_debug = { 
		
		icon = GFX_decision_generic_ignite_civil_war

		allowed = {
			tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
			has_completed_focus = XFR_deal_with_the_mutants 
		}

		visible = { 
			24 = { has_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			24 = { is_owned_and_controlled_by = ROOT }
			has_completed_focus = XFR_deal_with_the_mutants
			is_debug = yes
			is_ai = no
		}

		fire_only_once = no

		complete_effect = {
			24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
        }
	}
	XFR_centre_hunt_down_mutants  = { 
		
		icon = GFX_decision_generic_ignite_civil_war

		allowed = {
			tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
			has_completed_focus = XFR_deal_with_the_mutants 
		}

		visible = { 
			24 = { has_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			24 = { is_owned_and_controlled_by = ROOT }
			has_completed_focus = XFR_deal_with_the_mutants
		}

		fire_only_once = no

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 499 }
		}
		custom_cost_text = decision_cost_500_guns

		days_remove = 30

        ai_will_do = {
			base = 1000
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
    				type = infantry_equipment
    				amount = -500
				}
			}
		}
		remove_effect = {
			if = {
				limit = { check_variable = { var = XFR_mutant_hunt_progress value = 80 compare = less_than } }
				add_to_variable = { XFR_mutant_hunt_progress = 20 }
				random_list = {
					50 = {
						add_manpower = -200
					}
					25 = {
						add_manpower = -100
					}
					15 = {
						add_manpower = -50
					}
					9 = {
						add_manpower = -25
					}
					1 = {
					}
				}  
				custom_effect_tooltip = XFR_mutant_hunt_progress_tt
			}
			else_if = {
				limit = { check_variable = { var = XFR_mutant_hunt_progress value = 80 compare = equals } }
				add_to_variable = { XFR_mutant_hunt_progress = 10 }
				random_list = {
					40 = {
						add_manpower = -200
					}
					25 = {
						add_manpower = -100
					}
					20 = {
						add_manpower = -50
					}
					10 = {
						add_manpower = -25
					}
					5 = {
					}
				}  
				custom_effect_tooltip = XFR_mutant_hunt_progress_tt
			}
			else = {
				24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			}
        }
	}

	XFR_centre_improve_centre_infrastructure  = { 
		
		icon = GFX_decision_generic_construction

		allowed = {
			tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
			24 = { infrastructure < 5 }
			has_completed_focus = XFR_deal_with_the_mutants 
		}

		visible = { 
			24 = { is_owned_and_controlled_by = ROOT }
			24 = { infrastructure < 5 }
			has_completed_focus = XFR_deal_with_the_mutants
		}

		cancel_trigger = {
			OR = {
				24 = { infrastructure > 4 }
				has_completed_focus = XFR_crisis_averted
			}
		}

		fire_only_once = yes

		cost = 80

		days_remove = 100

		#days_re_enable = 180

		modifier = { 
		    civilian_factory_use = 2
		}

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			24 = {
				add_building_construction = {
    				type = infrastructure
    				level = 1
    				instant_build = yes
				}
			}
        }
	}

	XFR_centre_crisis_timer = {

		icon = mission_icon

		priority = 100

		activation = {
			has_country_flag = XFR_centre_crisis_timer_activated
		}

    	allowed = {
    	    original_tag = XFR
    	}

    	cancel_trigger = {
    	}

    	available = {
			has_completed_focus = XFR_crisis_averted
    	}

    	is_good = no

		fire_only_once = yes

    	days_mission_timeout = 365

    	complete_effect = {
    	    add_political_power = 100
			hidden_effect = {
				news_event = { id = XFR_news_events.1 days = 1 }
			}
    	}

    	timeout_effect = {
			country_event = { id = XFR_events.2 days = 1 }
			add_stability = -0.5
    	}
	}

}

XFR_country_development_cat = {
	XFR_electrify_state_decision = {
		
		icon = GFX_decision_generic_electricity

		cost = 25


		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = FROM
			}
		}

		available = {
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = {
			has_completed_focus = XFR_electrify_the_country
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
		}

		ai_will_do = {
			base = 100
		}

		cancel_trigger = {
			FROM = { NOT = { is_owned_and_controlled_by = ROOT } }
		}


		targets_dynamic = yes

		state_target = yes

		on_map_mode = map_only  

		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { 
					has_dynamic_modifier = { modifier = XFR_electricity_state_modifier }
					has_dynamic_modifier = { modifier = XFR_mutant_state_modifier }
				}
			}
		}

		days_remove = 30

		complete_effect = {
		}

		remove_effect = {
			FROM = { add_dynamic_modifier = { modifier = XFR_electricity_state_modifier } }
		}
	}

}

foreign_politics = {

	XFR_retract_XAL_military_support = {

		icon = GFX_decision_generic_military

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { has_idea = XAL_burgundy_volunteers }
		}

		available = {
			FROM = {
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						NOT = { has_government = neutrality }
					}
					AND = {
						is_subject = yes
						NOT = { is_subject_of = ROOT }
					}
					has_opinion = { target = ROOT value < -49 }
					has_added_tension_amount > 10
					has_wargoal_against = ROOT
				}
			}
		}

		cost = 50

		priority = 1

		fire_only_once = yes

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 100000
				XAL = {
					has_government = fascism
				}
			}
		}

		visible = {
			FROM = {
				has_idea = XAL_burgundy_volunteers
			}
		}

		complete_effect = {
			FROM = {
				country_event = { id = XFR_events.5 }
				remove_ideas = XAL_burgundy_volunteers
				add_opinion_modifier = {
					target = ROOT
    				modifier = XFR_recalled_support
				}
				delete_units = {
					division_template = "Brigade des Volontaires Bourguignons"
					disband = yes
				}
			}
		}
	}

	XFR_improve_relations_XAL = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { original_tag = XAL }
		 }

		available = {
			has_completed_focus = XFR_alcase_lorraine_diplomacy
			FROM = {
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
				has_opinion = { target = ROOT value > 24 }
			}
			any_neighbor_country = {
				tag = FROM
			}
		}

		cost = 50

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				NOT = { has_war_with = ROOT }
				has_military_access_to = ROOT
				gives_military_access_to = ROOT
			}
			NOT = { has_completed_focus = XFR_dennounce_democracy }
		}

		complete_effect = {
			reverse_add_opinion_modifier = {
				target = FROM
    			modifier = XFR_open_borders
			}
			FROM = { give_military_access = ROOT }
			add_opinion_modifier = {
				target = FROM
    			modifier = XFR_open_borders
			}
			ROOT = { give_military_access = FROM }
			
		}
	}

	XFR_formalise_the_treaty = {

		icon = GFX_decision_eng_trade_unions_support

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { original_tag = XAL }
		 }

		available = {
			has_completed_focus = XFR_alcase_lorraine_diplomacy
			FROM = {
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
				has_opinion = { target = ROOT value > 49 }
			}
			any_neighbor_country = {
				tag = FROM
			}
		}

		cost = 25

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				NOT = { has_war_with = ROOT }
				NOT = { is_guaranteed_by = ROOT }
			}
			
			NOT = { has_completed_focus = XFR_dennounce_democracy }
		}

		complete_effect = {
			give_guarantee = FROM
		}
	}

	XFR_limit_napoleons_influence = {

		icon = GFX_decision_SWI_expand_covert_operations

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				original_tag = XNF
			 }
		}

		available = {
			FROM = {
				has_country_leader = { character = XNF_napoleon_x ruling_only = yes }
			}
			always = no
		}

		cost = 75

		priority = 100

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
			FROM = {
				has_government = neutrality
			}
			
		}

		days_remove = 70

		complete_effect = {
		}

		remove_effect = {
		}
	}
	
	XFR_kick_from_udb = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { has_idea = XFR_customs_agreement_idea }
		}

		available = {
			FROM = {
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						NOT = { has_government = neutrality }
					}
					has_opinion = { target = ROOT value < -19 }
					has_added_tension_amount > 5
					has_wargoal_against = ROOT
				}
			}
		}

		cost = 50

		priority = 1

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				has_idea = XFR_customs_agreement_idea
			}
			is_ai = no
		}

		complete_effect = {
			FROM = {
				country_event = { id = XFR_events.15 }
				remove_ideas = XFR_customs_agreement_idea
				add_opinion_modifier = {
					target = ROOT
    				modifier = XFR_kicked_from_udb
				}
			}
		}
	}

}

XFR_bop_decision_cat = {

	XFR_french_unity_propaganda = {

		icon = GFX_decision_eng_propaganda_campaigns

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				OR = {
					original_tag = XAL
					original_tag = XPR
					original_tag = XLF
					original_tag = XBR
					original_tag = XPY
					original_tag = XAQ
					original_tag = XLX
				}
			 }
		}

		available = {
			has_completed_focus = XFR_lessen_internal_borders
			NOT = { has_country_flag = XFR_spreading_unity_propaganda }
			FROM = {
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
		}

		cost = 75

		priority = 1

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 70

		complete_effect = {
			set_country_flag = XFR_spreading_unity_propaganda
		}

		remove_effect = {
			FROM = {
				add_popularity = {
					ideology = democratic
					popularity = 0.05
				}
			}
			clr_country_flag = XFR_spreading_unity_propaganda
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = -0.05
			}
		}
	}

	XFR_promote_democracy = {

		icon = GFX_decision_SWI_swiss_democratic_tradition_campaign

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				OR = {
					original_tag = XAL
					original_tag = XPR
					original_tag = XLF
					original_tag = XBR
					original_tag = XPY
					original_tag = XAQ
					original_tag = XLX
				}
			 }
		}

		available = {
			has_completed_focus = XFR_lessen_internal_borders
			NOT = { has_country_flag = XFR_spreading_unity_propaganda }
			FROM = {
				democratic > 0
			}
		}

		cost = 75

		priority = 2

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 70

		complete_effect = {
			set_country_flag = XFR_spreading_unity_propaganda
		}

		remove_effect = {
			FROM = {
				add_popularity = {
					ideology = democratic
					popularity = 0.1
				}
			}
			clr_country_flag = XFR_spreading_unity_propaganda
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = 0.05
			}
		}
	}

	XFR_support_neighbours = {

		icon = GFX_decision_generic_fundraising

		allowed = {
			original_tag = XFR
		}

		available = {
			any_neighbor_country = {
				has_government = democratic
			}
		}

		cost = 75

		priority = 50

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 35

		days_re_enable = 180

		modifier = {
			consumer_goods_factor = 0.05
		}

		complete_effect = {
		}

		remove_effect = {
			add_stability = 0.05
			every_neighbor_country = {
				limit = {
					has_government = democratic
				}
				add_stability = 0.05
				add_offsite_building = { type = industrial_complex level = 1 }
				add_opinion_modifier = {
					target = ROOT
					modifier = XFR_sent_support
				}
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = 0.05
			}
		}
	}

	XFR_customs_agreements = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		available = {
			NOT = {has_idea = closed_economy }
			any_neighbor_country = {
				OR = {
					has_government = democratic
					has_government = neutrality
				}
				NOT = {has_idea = closed_economy }
				NOT = {has_idea = XFR_customs_agreement_idea }
				hidden_trigger = { NOT = {has_idea = anarchy_idea_max } }
			}
		}

		cost = 75

		priority = 50

		fire_only_once = no

		days_re_enable = 365

		ai_will_do = {
			factor = 1000
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 7

		modifier = {
			political_power_factor = -0.05
		}

		complete_effect = {
		}

		remove_effect = {
			# event for every neighbouring democracy and neutral country
			every_neighbor_country = {
				limit = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
					NOT = {has_idea = closed_economy }
					NOT = {has_idea = XFR_customs_agreement_idea }
					hidden_trigger = { NOT = {has_idea = anarchy_idea_max } }
				}
				country_event = { id = XFR_events.12 days = 1 random_hours = 12 random_days = 1 }
			}
			hidden_effect = {
				if = {
           		limit = {
            		NOT = { has_idea = XFR_customs_agreement_head_idea }
            		}
            		add_ideas = XFR_customs_agreement_head_idea
        		}
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_ideas = XFR_customs_agreement_idea
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = 0.025
				}
			}
			
		}
	}

	XFR_promise_swiss_autonomy = {

		icon = GFX_decision_SWI_focus_on_swiss_unity

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				original_tag = XSS
			 }
		}

		available = {
			FROM = {
				has_government = democratic
				NOT = { has_idea = XSS_neutrality_idea }
			}
		}

		cost = 75

		priority = 10

		fire_only_once = no

		ai_will_do = {
			factor = 1000
		}

		visible = {
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
			FROM = {
				any_owned_state = {
					DEN_is_french_state = yes
				}
				NOT = { has_completed_focus = XSS_storm_the_council }
			}
			
		}

		days_remove = 70

		complete_effect = {
		}

		remove_effect = {
			FROM = {
				add_popularity = {
					ideology = democratic
					popularity = 0.1
				}
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = 0.05
			}
		}
	}

	XFR_move_to_paris  = { 
		
		icon = GFX_decision_SOV_place_hq

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 16
			}
		}

		available = {
			16 = {
				is_owned_and_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				OR = {
					compliance > 30
					is_core_of = ROOT
				}
			}
		}

		visible = { 
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		cancel_trigger = {
			NOT = {
				16 = {
					is_fully_controlled_by = ROOT
				}
			}
		}

		fire_only_once = yes

		cost = 100

		priority = 100

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			if = {
				limit = {
					16 = { NOT = { is_core_of = ROOt } }
				}
				16 = { add_core_of = ROOT }
			}
			set_capital  = { state = 16 }
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = -0.1
			}
        }
	}

}

XFR_integration = {

	XFR_integrate_alsace_lorraine  = { 
		
		icon = GFX_decision_infiltrate_state

		allowed = {
			original_tag = XFR
		}

		available = {
			XAL = {
				all_core_state = {
					is_owned_and_controlled_by = ROOT
					compliance > 30
				}
			}
		}

		visible = { 
			XAL = {
				any_core_state = {
					is_owned_and_controlled_by = ROOT
				}
			}
			NOT = {
				XAL = {
					all_core_state = {
						is_core_of = ROOT
					}
				}
			}
		}

		cancel_trigger = {
			NOT = {
				XAL = {
					any_core_state = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 100

		days_remove = 180

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = XAL
				}
				add_core_of = ROOT
			}
			XAL_characters_join_XFR = yes
        }
	}

	XAL_integrate_rhineland  = { 
		
		icon = GFX_decision_ger_reichskommissariats

		allowed = {
			original_tag = XAL
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 42
				state = 983
				state = 51
			}
		}

		available = {
			42 = {
				is_owned_and_controlled_by = ROOT
			}
			983 = {
				is_owned_and_controlled_by = ROOT
			}
			51 = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = { 
			NOT = {
				42 = {
					is_core_of = ROOT
				}
				983 = {
					is_core_of = ROOT
				}
				51 = {
					is_core_of = ROOT
				}
			}
		}

		cancel_trigger = {
			NOT = {
				OR = {
					42 = {
						is_owned_and_controlled_by = ROOT
					}
					983 = {
						is_owned_and_controlled_by = ROOT
					}
					51 = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 150

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			42 = {
				add_core_of = XAL
			}
			983 = {
				add_core_of = XAL
			}
			51 = {
				add_core_of = XAL
			}
        }
	}

}

prospect_for_resources = {
	XFR_develop_burgundy_aluminum = { #27

		icon = aluminium

		allowed = {

		}

		highlight_states = {
			highlight_state_targets = {
				state = 27
			}
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 27
			controls_state = 27
		}

		visible = {
			has_tech = excavation1
			owns_state = 27
			controls_state = 27
			27 = {
				NOT = {
					has_state_flag = burgundy_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			base = 0.3
			modifier = {  # Too low PP
				factor = 0.5
					has_political_power < 80
			}
			modifier = { #We have plenty of PP, avanti!
				factor = 3
				has_political_power > 200
			}
			modifier = { #Running out of the stuff, need more!
				factor = 5
				has_resources_in_country = {
					resource = aluminium
					amount < 1
				}
			}
		}
		remove_effect = {
			27 = { set_state_flag = burgundy_aluminium_developed }
			27 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}

}
XFR_centre_crisis_cat = {

	XFR_clear_centre_not_XFR = { 
		
		icon = GFX_decision_generic_ignite_civil_war

		allowed = {
			NOT = { original_tag = XFR }
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
		}

		visible = { 
			24 = { has_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			24 = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_100_guns

		days_remove = 70

        ai_will_do = {
			base = 1000
		}
		cancel_trigger = {
			NOT = { 24 = { is_owned_and_controlled_by = ROOT } }
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
    				type = infantry_equipment
    				amount = -100
				}
			}
		}

		remove_effect = {
			24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			24 = { set_demilitarized_zone = no }
        }
	}

	XFR_centre_hunt_down_mutants  = { 
		
		icon = GFX_decision_generic_ignite_civil_war

		allowed = {
			tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
			has_completed_focus = XFR_deal_with_the_mutants 
		}

		visible = { 
			24 = { has_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			24 = { is_owned_and_controlled_by = ROOT }
			has_country_flag = XFR_centre_crisis_timer_activated
		}

		fire_only_once = no

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_100_guns

		days_remove = 21

        ai_will_do = {
			base = 1000
		}
		cancel_trigger = {
			NOT = { 24 = { is_owned_and_controlled_by = ROOT } }
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
    				type = infantry_equipment
    				amount = -100
				}
			}
		}
		remove_effect = {
			if = {
				limit = { check_variable = { var = XFR_mutant_hunt_progress value = 80 compare = less_than } }
				add_to_variable = { XFR_mutant_hunt_progress = 20 }
				random_list = {
					50 = {
						add_manpower = -50
					}
					25 = {
						add_manpower = -25
					}
					15 = {
						add_manpower = -10
					}
					9 = {
						add_manpower = -5
					}
					1 = {
					}
				}  
				custom_effect_tooltip = XFR_mutant_hunt_progress_tt
			}
			else_if = {
				limit = { check_variable = { var = XFR_mutant_hunt_progress value = 80 compare = equals } }
				add_to_variable = { XFR_mutant_hunt_progress = 10 }
				random_list = {
					40 = {
						add_manpower = -50
					}
					25 = {
						add_manpower = -25
					}
					20 = {
						add_manpower = -10
					}
					10 = {
						add_manpower = -5
					}
					5 = {
					}
				}  
				custom_effect_tooltip = XFR_mutant_hunt_progress_tt
			}
			else = {
				24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
			}
        }
	}

	XFR_centre_improve_centre_infrastructure  = { 
		
		icon = GFX_decision_generic_construction

		priority = 50

		allowed = {
			tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 24 
			}
		}

		available = {
			24 = { is_owned_and_controlled_by = ROOT }
			24 = { infrastructure < 5 }
			has_completed_focus = XFR_investigate_centre 
		}

		visible = { 
			24 = { is_owned_and_controlled_by = ROOT }
			24 = { infrastructure < 5 }
			has_country_flag = XFR_centre_crisis_timer_activated
			NOT = { has_completed_focus = XFR_crisis_averted }
		}

		cancel_trigger = {
			OR = {
				NOT = { 24 = { is_owned_and_controlled_by = ROOT } }
				24 = { infrastructure > 4 }
				has_completed_focus = XFR_crisis_averted
			}
		}

		fire_only_once = yes

		cost = 80

		days_remove = 100

		#days_re_enable = 180

		modifier = { 
		    civilian_factory_use = 2
		}

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			24 = {
				add_building_construction = {
    				type = infrastructure
    				level = 1
    				instant_build = yes
				}
			}
        }
	}

	XFR_centre_crisis_timer = {

		icon = GFX_decision_revolt

		priority = 100

		activation = {
			has_country_flag = XFR_centre_crisis_timer_activated
		}

    	allowed = {
    	    original_tag = XFR
    	}

    	available = {
			has_completed_focus = XFR_crisis_averted
    	}

		cancel_trigger = {
			NOT = { 24 = { is_owned_and_controlled_by = ROOT } }
		}

    	is_good = no

		fire_only_once = yes

    	days_mission_timeout = 365

    	complete_effect = {
    	    add_political_power = 100
			hidden_effect = {
				news_event = { id = XFR_news_events.1 days = 1 }
			}
    	}

    	timeout_effect = {
			country_event = { id = XFR_events.2 days = 1 }
			add_stability = -0.5
    	}
	}

}

XFR_other_crisis_cat = {

	XFR_fascist_timer = {

		icon = GFX_decision_eng_blackshirt_march

		priority = 100

		activation = {
			has_country_flag = XFR_fascist_marches
		}

    	allowed = {
    	    original_tag = XFR
    	}

    	available = {
			NOT = {
				OR = {
					has_idea = XFR_fascist_tensions
					has_idea = XFR_fascist_mobilising
				}
			}
    	}

    	is_good = no

		fire_only_once = no

    	days_mission_timeout = 30

    	complete_effect = {
			clr_country_flag = XFR_fascist_marches
    	}

    	timeout_effect = {
			add_stability = -0.05
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
    	}
	}

	XFR_anarchist_timer = {

		icon = GFX_decision_POL_organize_strike_two

		priority = 90

		activation = {
			has_country_flag = XFR_anarchist_actions
		}

    	allowed = {
    	    original_tag = XFR
    	}

    	available = {
			NOT = { 18 = { has_dynamic_modifier = { modifier = XFR_anarchists_state_modifier } } }
    	}

    	is_good = no

		fire_only_once = no

    	days_mission_timeout = 30

    	complete_effect = {
			clr_country_flag = XFR_anarchist_actions
    	}

    	timeout_effect = {
			random_list = {
				50 = {
					18 = {
						damage_building = {
							type = infrastructure
							damage = 1
						}
					}
				}
				50 = {
					18 = {
						damage_building = {
							type = industrial_complex
							damage = 1
						}
					}
				}
			}
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
    	}
	}

	XFR_monarchist_speech_timer = {

		icon = GFX_decision_hol_radio_oranje

		priority = 80

		activation = {
			has_country_flag = XFR_herzog_unlocked
		}

    	allowed = {
    	    original_tag = XFR
    	}

    	available = {
			NOT = { has_idea = XFR_herzogs_speeches }
    	}

    	is_good = no

		fire_only_once = no

    	days_mission_timeout = 70

    	complete_effect = {
			clr_country_flag = XFR_herzog_unlocked
    	}

    	timeout_effect = {
			add_political_power = -75
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
    	}
	}

}

XFR_last_modernisation = {

	XFR_army_reform_hq = {

		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = {
			original_tag = XFR
		}

		available = {
			
		}

		custom_cost_trigger = {
			has_army_experience > 99
		}
		custom_cost_text = decision_cost_100_army_xp

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				army_experience = -100
			}
		}

		remove_effect = {
			add_ideas = XFR_modern_army_hq
		}
	}

	XFR_army_reform_cavalry = {

		icon = GFX_decision_generic_cavalry

		allowed = {
			original_tag = XFR
		}

		available = {
			
		}

		custom_cost_trigger = {
			has_army_experience > 99
		}
		custom_cost_text = decision_cost_100_army_xp

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_idea = XFR_modern_cavalry
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				army_experience = -100
			}
		}

		remove_effect = {
			swap_ideas = {
				remove_idea = XFR_modern_cavalry
				add_idea = XFR_modern_cavalry2
			}
		}
	}

	XFR_army_reform_infantry = {

		icon = GFX_decision_SWE_set_army_budget

		allowed = {
			original_tag = XFR
		}

		available = {
			
		}

		custom_cost_trigger = {
			has_army_experience > 99
		}
		custom_cost_text = decision_cost_100_army_xp

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_idea = XFR_modern_infantry
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				army_experience = -100
			}
		}

		remove_effect = {
			swap_ideas = {
				remove_idea = XFR_modern_infantry
				add_idea = XFR_modern_infantry2
			}
		}
	}

	XFR_army_reform_artillery = {

		icon = GFX_decision_generic_ignite_civil_war

		allowed = {
			original_tag = XFR
		}

		available = {
			
		}

		custom_cost_trigger = {
			has_army_experience > 99
		}
		custom_cost_text = decision_cost_100_army_xp

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_idea = XFR_modern_artillery
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				army_experience = -100
			}
		}

		remove_effect = {
			swap_ideas = {
				remove_idea = XFR_modern_artillery
				add_idea = XFR_modern_artillery2
			}
		}
	}

	XFR_army_reform_tanks = {

		icon = GFX_decision_generic_tank

		allowed = {
			original_tag = XFR
		}

		available = {
			
		}

		custom_cost_trigger = {
			has_army_experience > 99
		}
		custom_cost_text = decision_cost_100_army_xp

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_idea = XFR_modern_tanks
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				army_experience = -100
			}
		}

		remove_effect = {
			swap_ideas = {
				remove_idea = XFR_modern_tanks
				add_idea = XFR_modern_tanks2
			}
		}
	}

	XFR_finish_army_reform = {

		icon = GFX_decision_generic_army_support

		allowed = {
			original_tag = XFR
		}

		available = {
			has_idea = XFR_modern_army_hq
			has_idea = XFR_modern_cavalry2
			has_idea = XFR_modern_infantry2
			OR = {
				has_idea = XFR_modern_tanks2
				has_idea = XFR_modern_artillery2
			}
		}

		

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_idea = XFR_modern_army_hq
			has_idea = XFR_modern_cavalry2
			has_idea = XFR_modern_infantry2
			OR = {
				has_idea = XFR_modern_tanks2
				has_idea = XFR_modern_artillery2
			}
		}

		days_remove = 70

		complete_effect = {
		}

		remove_effect = {
			remove_ideas = XFR_modern_cavalry2
			remove_ideas = XFR_modern_infantry2
			if = {
				limit = {
					has_idea = XFR_modern_artillery2
				}
				remove_ideas = XFR_modern_artillery2
				add_ideas = XFR_modern_army
			}
			if = {
				limit = {
					has_idea = XFR_modern_tanks2
				}
				remove_ideas = XFR_modern_tanks2
				add_ideas = XFR_modern_army_tanks
			}
		}
	}

}

XFR_country_development_cat = {
	XFR_electrify_state_decision = {
		
		icon = GFX_decision_generic_electricity

		cost = 25

		priority = 5

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = FROM
			}
		}

		available = {
			has_completed_focus = XFR_electrify_the_country
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
			has_country_flag = XFR_electrifying_visible
		}

		ai_will_do = {
			base = 100
		}

		cancel_trigger = {
			FROM = { NOT = { is_owned_and_controlled_by = ROOT } }
		}


		targets_dynamic = yes

		state_target = yes

		on_map_mode = map_only  

		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { 
					has_dynamic_modifier = { modifier = XFR_electricity_state_modifier }
					has_dynamic_modifier = { modifier = XFR_mutant_state_modifier }
				}
			}
		}

		days_remove = 30

		complete_effect = {
		}

		remove_effect = {
			FROM = { add_dynamic_modifier = { modifier = XFR_electricity_state_modifier } }
			if = {
				limit = { FROM = { NOT = { is_core_of = ROOT }}}
				FROM = { add_compliance = 10 }
			}
		}
	}

	XFR_electrifying_visible_switch = {
		
		icon = GFX_decision_generic_electricity

		cost = 0

		priority = 5

		allowed = {
			original_tag = XFR
		}

		available = {
		}

		visible = {
			has_completed_focus = XFR_electrify_the_country
			is_ai = no
		}

		ai_will_do = {
			base = 0
		}

		complete_effect = {
			if = {
				limit = {
					has_country_flag = XFR_electrifying_visible
				}
				clr_country_flag = XFR_electrifying_visible
				custom_effect_tooltip = XFR_electrifying_visible_switch_tt
			}
			else = {
				set_country_flag = XFR_electrifying_visible
				custom_effect_tooltip = XFR_electrifying_visible_switch_tt2
			}
			
		}

	}

	XFR_gather_funds = {

		icon = GFX_decision_gre_investment_decisions

		allowed = {
			original_tag = XFR
		}

		available = {
			NOT = { has_country_flag = XFR_using_industry_fund }
			any_owned_state = {
				industrial_complex > 0
			}
			num_of_civilian_factories < 50
		}

		cost = 75

		priority = 4

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
			NOT = {
				check_variable = {
    				var = XFR_industrial_fund_var
    				value = 5
    				compare = equals
				}
			}
			num_of_civilian_factories < 50
		}

		days_remove = 50

		days_re_enable = 10

		modifier = {
			consumer_goods_factor = 0.1
		}

		complete_effect = {
			set_country_flag = XFR_gathering_funds
		}

		remove_effect = {
			clr_country_flag = XFR_gathering_funds
			random_owned_state = {
				limit = {
					industrial_complex > 0
				}
				add_building_construction = {
					type = industrial_complex
					level = -1
					instant_build = yes
				}
			}
			add_to_variable = {
				var = XFR_industrial_fund_var
				value = 1
				tooltip = XFR_add_1_to_industrial_fund
			}
		}
	}

	XFR_industrial_funds = {

		icon = GFX_decision_generic_merge_plant_materiel

		allowed = {
			original_tag = XFR
		}

		available = {
			NOT = { has_country_flag = XFR_gathering_funds }
			check_variable = {
    			var = XFR_industrial_fund_var
    			value = 1
    			compare = greater_than_or_equals
			}
			num_of_civilian_factories < 50
		}

		priority = 3

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
			num_of_civilian_factories < 50
		}

		days_remove = 30

		days_re_enable = 10


		complete_effect = {
			set_country_flag = XFR_using_industry_fund
		}

		remove_effect = {
			clr_country_flag = XFR_using_industry_fund
			add_offsite_building = { type = industrial_complex level = XFR_industrial_fund_var }
			custom_effect_tooltip = XFR_industrial_funds_tt
			set_variable = {
    			var = XFR_industrial_fund_var
    			value = 0
			}
		}
	}

	XFR_cooperate_with_BEZ = {

		icon = GFX_decision_gre_paying_ifc_debt

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_reopen_trade
			has_government = democratic
			XNM = { has_government = democratic }
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
			any_other_country = { has_idea = BEZ_membership }
			has_government = democratic
			XNM = { has_government = democratic }
		}

		cost = 100

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 70

		complete_effect = {
		}

		remove_effect = {
			add_offsite_building = { type = industrial_complex level = 1 }
			every_other_country = {
				limit = { has_idea = BEZ_membership }
				add_offsite_building = { type = industrial_complex level = 1 }
				add_opinion_modifier = {
					target = ROOT
					modifier = XFR_bez_agreement
				}
			}
		}
	}

	XFR_build_rhone_dam = {

		icon = GFX_decision_generic_construction

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 973 
			}
		}

		available = {
			has_completed_focus = XFR_learn_from_mistakes
			973 = { is_fully_controlled_by = ROOT }
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
		}

		cost = 75

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 70

		complete_effect = {
			add_manpower = -1000
		}

		cancel_trigger = {
			NOT = { 973 = { is_fully_controlled_by = ROOT } }
		}

		cancel_effect = {
			add_manpower = 1000
		}

		remove_effect = {
			add_manpower = 1000
			973 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = XFR_industry_modifier_tt
			add_to_variable = {
				XFR_industry_industrial_capacity_factory = 0.05
				tooltip = industrial_capacity_factory_tt
			}
			add_to_variable = {
				XFR_industry_industrial_capacity_dockyard = 0.05
				tooltip = industrial_capacity_dockyard_tt
			}
		}
	}

	XFR_support_champagne_farmers = {

		icon = GFX_decision_POL_organize_strike_two

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 18 
			}
		}

		available = {
			has_completed_focus = XFR_agriculture
			18 = { is_fully_controlled_by = ROOT }
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
		}

		cost = 75

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 70

		cancel_trigger = {
			NOT = { 18 = { is_fully_controlled_by = ROOT } }
		}

		remove_effect = {
			custom_effect_tooltip = XFR_industry_modifier_tt
			add_to_variable = {
				XFR_industry_consumer_goods_factor = 0.05
				tooltip = consumer_goods_factor_tt
			}
			add_to_variable = {
				XFR_industry_monthly_population = 0.1
				tooltip = monthly_population_tt
			}
		}
	}

	XFR_invest_in_railways = {

		icon = GFX_decision_generic_train

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_expand_the_railroads
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
		}

		cost = 75

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 70

		complete_effect = {
			custom_effect_tooltip = XFR_industry_modifier_tt
			add_to_variable = {
				XFR_industry_production_speed_rail_way_factor = 0.15
				tooltip = production_speed_rail_way_factor_tt
			}
		}
	}

	XFR_expand_toaster_industry = {

		icon = GFX_decision_generic_consumer_goods

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_civilian_industry_expansion
			any_owned_state = { is_fully_controlled_by = ROOT }
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
		}

		cost = 75

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 70

		cancel_trigger = {
			NOT = { any_owned_state = { is_fully_controlled_by = ROOT } }
		}

		remove_effect = {
			every_owned_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
    					building = industrial_complex
    					size > 1
    					include_locked = no
					}
				}
				random_select_amount = 1
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			custom_effect_tooltip = XFR_industry_modifier_tt
			add_to_variable = {
				XFR_industry_consumer_goods_factor = -0.05
				tooltip = consumer_goods_factor_tt
			}
		}
	}

	XFR_expand_alsace_steel_factories = {

		icon = GFX_decision_steel

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 976 
			}
		}

		available = {
			has_completed_focus = XFR_alsatian_steel_industry
			976 = { is_fully_controlled_by = ROOT }
		}

		visible = {
			has_completed_focus = XFR_industrial_investments
		}

		cost = 75

		priority = 2

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		days_remove = 35

		cancel_trigger = {
			NOT = { 976 = { is_fully_controlled_by = ROOT } }
		}

		remove_effect = {
			976 = {
				add_resource = {
				    type = steel
				    amount = 10
				}
			}
		}
	}

}

foreign_politics = {

	XFR_demand_papacy_states  = { 
		
		icon = GFX_decision_eng_trade_unions_demand

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 2
				state = 978
			}
		}

		available = {
			has_completed_focus = XFR_proclaim_french_government
		}

		target_trigger = {
			FROM = {	
				OR = {
					state = 2
					state = 978
				}
			}
		}


		visible = { 
			has_completed_focus = XFR_return_of_the_pope
			NOT = { FROM = { is_controlled_by_ROOT_or_ally = yes } }
		}

		targets_dynamic = yes

		state_target = yes

		fire_only_once = yes

		on_map_mode = decision_view_only

		cost = 100

		priority = 100

        ai_will_do = {
			base = 100
		}
		complete_effect = {
			FROM = { save_event_target_as = demanded_prov_target }
			FROM = {
				owner = {
					country_event = { id = generic.23 days = 1 }
				}
			}
        }
	}

	XFR_restore_the_papacy  = { 
		
		icon = GFX_decision_generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 2
				state = 978
			}
		}

		available = {
			has_completed_focus = XFR_return_of_the_pope
			has_completed_focus = XFR_proclaim_french_government
			2 = { is_owned_and_controlled_by = ROOT }
			978 = { is_owned_and_controlled_by = ROOT }
		}

		visible = { 
			has_completed_focus = XFR_democracy_prevails
			OR = {
				NOT = { has_completed_focus = XFR_proclaim_french_government}
				has_completed_focus = XFR_return_of_the_pope
			}
		}

		fire_only_once = yes

		cost = 100

		priority = 100

        ai_will_do = {
			base = 100
		}
		complete_effect = {
			2 = {
				hidden_effect = {
					remove_claim_by = ROOT
					remove_core_of = XLA
				}
				add_core_of = XPA
				transfer_state_to = XPA
				set_state_name = "Upper Lazio"
			}
			978 = { 
				hidden_effect = {
					remove_claim_by = ROOT
					remove_core_of = XLA
				}
				add_core_of = XPA
				transfer_state_to = XPA
				set_state_name = "Lower Lazio"
			}
			hidden_effect = {
				set_province_name = { id = 9904 name = "Roma" }
				add_victory_points = {
					province = 9904
					value = 10
				}
				set_victory_points = {
					province = 6862
					value = 0
				}
				set_victory_points = {
					province = 923
					value = 0
				}
			}
			set_autonomy = {
    			target = XPA
    			autonomous_state = autonomy_integrated_puppet
    			end_wars = no
    			end_civil_wars = no
			}
			hidden_effect = {
				XPA = {
					add_offsite_building = { type = industrial_complex level = 5 }
					add_offsite_building = { type = arms_factory level = 1 }
				}
				news_event = { id = XFR_news_events.13 }
			}
			if = {
				limit = {
					has_power_balance = { id = XFR_federalists_restaurationists_bop }
				}
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = -0.1
				}
			}
        }
	}

	XFR_retract_XAL_military_support = {

		icon = GFX_decision_generic_military

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { has_idea = XAL_burgundy_volunteers }
		}

		available = {
			FROM = {
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						NOT = { has_government = neutrality }
					}
					AND = {
						is_subject = yes
						NOT = { is_subject_of = ROOT }
					}
					has_opinion = { target = ROOT value < -49 }
					has_added_tension_amount > 10
					has_wargoal_against = ROOT
				}
			}
		}

		cost = 50

		priority = 1

		fire_only_once = yes

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 100000
				XAL = {
					has_government = fascism
				}
			}
		}

		visible = {
			FROM = {
				has_idea = XAL_burgundy_volunteers
				NOT = { is_subject_of = ROOT }
			}
		}

		complete_effect = {
			FROM = {
				country_event = { id = XFR_events.5 }
				remove_ideas = XAL_burgundy_volunteers
				add_opinion_modifier = {
					target = ROOT
    				modifier = XFR_recalled_support
				}
				delete_units = {
					division_template = "Brigade des Volontaires Bourguignons"
					disband = yes
				}
			}
		}
	}

	XFR_improve_relations_XAL = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { original_tag = XAL }
		 }

		available = {
			has_completed_focus = XFR_alcase_lorraine_diplomacy
			FROM = {
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
				has_opinion = { target = ROOT value > 24 }
			}
			any_neighbor_country = {
				tag = FROM
			}
		}

		cost = 50

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				NOT = { is_subject_of = ROOT }
				NOT = { has_war_with = ROOT }
				NOT = {
					has_military_access_to = ROOT
					gives_military_access_to = ROOT
				}
			}
			NOT = { has_completed_focus = XFR_dennounce_democracy }
		}

		complete_effect = {
			reverse_add_opinion_modifier = {
				target = FROM
    			modifier = XFR_open_borders
			}
			FROM = { give_military_access = ROOT }
			add_opinion_modifier = {
				target = FROM
    			modifier = XFR_open_borders
			}
			ROOT = { give_military_access = FROM }
			
		}
	}

	XFR_formalise_the_treaty = {

		icon = GFX_decision_eng_trade_unions_support

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { original_tag = XAL }
		 }

		available = {
			has_completed_focus = XFR_alcase_lorraine_diplomacy
			FROM = {
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
				has_opinion = { target = ROOT value > 49 }
			}
			any_neighbor_country = {
				tag = FROM
			}
		}

		cost = 25

		priority = 10

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				NOT = { is_subject_of = ROOT }
				NOT = { has_war_with = ROOT }
				NOT = { is_guaranteed_by = ROOT }
			}
			
			NOT = { has_completed_focus = XFR_dennounce_democracy }
		}

		complete_effect = {
			give_guarantee = FROM
		}
	}

	XFR_limit_napoleons_influence = {

		icon = GFX_decision_SWI_expand_covert_operations

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				original_tag = XNF
			 }
		}

		available = {
			FROM = {
				has_country_leader = { character = XNF_napoleon_x ruling_only = yes }
			}
			always = no
		}

		cost = 75

		priority = 90

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				has_country_leader = { character = XNF_napoleon_x ruling_only = yes }
			}
			
		}

		days_remove = 70

		complete_effect = {
		}

		remove_effect = {
		}
	}

}

XFR_udb_cat = {

	XFR_customs_agreements = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		available = {
			NOT = {has_idea = closed_economy }
			any_neighbor_country = {
				any_core_state = { DEN_is_french_state = yes }
				OR = {
					has_government = democratic
					has_government = neutrality
				}
				NOT = { has_war_with = ROOT }
				NOT = {has_idea = closed_economy }
				XFR_no_economic_membership = yes
				hidden_trigger = { NOT = { has_idea = anarchy_idea_max } }
			}
		}

		cost = 75

		priority = 50

		fire_only_once = yes

		#days_re_enable = 365

		ai_will_do = {
			factor = 1000
		}

		visible = {
			has_completed_focus = XFR_economic_cooperation
		}

		complete_effect = {
			# event for every neighbouring democracy and neutral country
			every_neighbor_country = {
				limit = {
					any_core_state = { DEN_is_french_state = yes }
					OR = {
						has_government = democratic
						has_government = neutrality
					}
					NOT = { is_subject_of = ROOT }
					NOT = {has_idea = closed_economy }
					XFR_no_economic_membership = yes
					NOT = { has_war_with = ROOT }
					hidden_trigger = { NOT = {has_idea = anarchy_idea_max } }
				}
				country_event = { id = XFR_events.12 days = 0 random_hours = 12 random_days = 1 }
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_ideas = XFR_customs_agreement_idea
			}
			
		}
	}

	XFR_reach_out_to_new_new_england = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				original_tag = XNE
				XFR_no_economic_membership = yes
			 }
		}

		available = {
			NOT = { has_idea = closed_economy }
			FROM = {
				is_ally_with = ROOT
				OR = {
					has_government = democratic
					has_government = neutrality
				}
				NOT = { has_war_with = ROOT }
				NOT = {has_idea = closed_economy }
			}
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_completed_focus = XFR_across_the_channel
			has_idea = XFR_customs_agreement_head_idea
		}

		days_remove = 70

		cancel_trigger = {
			FROM = { XFR_no_economic_membership = no }
		}

		complete_effect = {
		}

		remove_effect = {
			FROM = {
				country_event = { id = XFR_events.12 days = 1 random_hours = 12 random_days = 1 }
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_ideas = XFR_customs_agreement_idea
			}
		}
	}

	XFR_invite_to_udb = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = {
				NOT = {has_idea = anarchy_idea_max }
				NOT = { original_tag = XNF }
				any_core_state = { DEN_is_french_state = yes }
				any_neighbor_country = {
					OR = {
						has_idea = XFR_customs_agreement_idea
						has_idea = XFR_customs_agreement_head_idea
					}
				}
				XFR_no_economic_membership = yes
				OR = {
					has_government = democratic
					has_government = neutrality
				}
				is_ally_with = ROOT
			 }
		}

		available = {
			NOT = {has_idea = closed_economy }
			FROM = {
				OR = {
					has_government = democratic
					has_government = neutrality
				}
				NOT = { has_war_with = ROOT }
				NOT = {has_idea = closed_economy }
				is_ally_with = ROOT
			}
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				FROM = { any_neighbor_country = { NOT = { has_idea = XFR_customs_agreement_head_idea } } }
				factor = 0
			}
			modifier = {
				has_opinion = { target = FROM value < -19 }
				factor = 0
			}
		}

		visible = {
			has_idea = XFR_customs_agreement_head_idea
			FROM = { XFR_no_economic_membership = yes }
		}

		days_remove = 70

		cancel_trigger = {
			FROM = { XFR_no_economic_membership = no }
		}

		complete_effect = {
		}

		remove_effect = {
			FROM = {
				country_event = { id = XFR_events.12 days = 1 random_hours = 12 random_days = 1 }
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_ideas = XFR_customs_agreement_idea
			}
		}
	}
	
	XFR_kick_from_udb = {

		icon = GFX_decision_SWI_isolate_switzerland

		allowed = {
			original_tag = XFR
		}

		target_trigger = { 
			FROM = { has_idea = XFR_customs_agreement_idea }
		}

		available = {
			FROM = {
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						NOT = { has_government = neutrality }
					}
					has_opinion = { target = ROOT value < -19 }
					ROOT = { has_opinion = { target = PREV value < -19 } }
					has_added_tension_amount > 5
					has_wargoal_against = ROOT
				}
				NOT = { is_subject_of = ROOT }
			}
		}

		cost = 50

		priority = 1

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			FROM = {
				has_idea = XFR_customs_agreement_idea
			}
			is_ai = no
		}

		complete_effect = {
			FROM = {
				country_event = { id = XFR_events.15 }
				remove_ideas = XFR_customs_agreement_idea
				add_opinion_modifier = {
					target = ROOT
    				modifier = XFR_kicked_from_udb
				}
			}
		}
	}

}

XFR_bop_decision_cat = {

	XFR_french_unity_propaganda = {

		icon = GFX_decision_eng_propaganda_campaigns

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_lessen_internal_borders
			any_neighbor_country = {
				NOT = { has_war_with = ROOT }
				hidden_trigger = { NOT = { has_idea = anarchy_idea_max } }
				any_core_state = {
					custom_trigger_tooltip = {
						DEN_is_french_state = yes
						tooltip = XFR_is_french_state_tt
					}
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
		}

		cost = 75

		priority = 20

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 30

		complete_effect = {
		}

		remove_effect = {
			every_neighbor_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					NOT = { has_idea = anarchy_idea_max }
					OR = {
						has_government = democratic
						has_government = neutrality
					}
					any_core_state = {
						DEN_is_french_state = yes
					}
				}
				add_stability = 0.05
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = -0.05
			}
		}
	}

	XFR_promote_democracy = {

		icon = GFX_decision_SWI_swiss_democratic_tradition_campaign

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_lessen_internal_borders
			any_neighbor_country = {
				NOT = { has_war_with = ROOT }
				hidden_trigger = { NOT = { has_idea = anarchy_idea_max } }
				any_core_state = {
					custom_trigger_tooltip = {
						DEN_is_french_state = yes
						tooltip = XFR_is_french_state_tt
					}
				}
			}
		}

		cost = 75

		priority = 10

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 30

		complete_effect = {
		}

		remove_effect = {
			every_neighbor_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					NOT = { has_idea = anarchy_idea_max }
					any_core_state = {
						DEN_is_french_state = yes
					}
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.1
				}
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = 0.05
			}
		}
	}

	XFR_fund_domestic_industry = {

		icon = GFX_decision_generic_factory

		allowed = {
			original_tag = XFR
		}

		available = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
			}
		}

		cost = 100

		priority = 40

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 35

		days_re_enable = 30

		modifier = {
			consumer_goods_factor = 0.05
		}

		complete_effect = {
		}

		remove_effect = {
			every_owned_state = {
				limit = {
					is_fully_controlled_by = ROOT
				}
				random_select_amount = 1
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = -0.05
			}
		}
	}

	XFR_support_neighbours = {

		icon = GFX_decision_generic_fundraising

		allowed = {
			original_tag = XFR
		}

		available = {
			any_neighbor_country = {
				has_government = democratic
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 75

		priority = 30

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 35

		days_re_enable = 30

		modifier = {
			consumer_goods_factor = 0.05
		}

		complete_effect = {
		}

		remove_effect = {
			add_stability = 0.05
			every_neighbor_country = {
				limit = {
					has_government = democratic
					NOT = { has_war_with = ROOT }
				}
				#add_offsite_building = { type = industrial_complex level = 1 }
				every_owned_state = {
					limit = {
						is_fully_controlled_by = PREV
					}
					random_select_amount = 1
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						is_subject_of = ROOT
					}
					add_autonomy_score = {
    					value = -100
    					localization = XFR_support_neighbours
					}
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = XFR_sent_support
				}
			}
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = 0.05
			}
		}
	}

	XFR_revise_the_constitution = {

		icon = GFX_decision_eng_trade_unions_support

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_state_of_the_constitution
		}

		cost = 100

		priority = 9

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 70

		modifier = {
			political_power_gain = -0.05
		}

		complete_effect = {
			
		}

		remove_effect = {
			add_timed_idea = {
				idea = XFR_constitutional_revisions
				days = 365
			} 
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_federalist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = 0.1
				}
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_restaurationist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = -0.1
				}
			}
			
		}
	}

	XFR_increase_social_spending = {

		icon = GFX_decision_generic_welfare

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_social_reform
		}

		cost = 75

		priority = 8

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 60

		days_re_enable = 30

		modifier = {
			consumer_goods_factor = 0.15
		}

		complete_effect = {
			
		}

		remove_effect = {
			add_political_power = 100
			add_stability = 0.05
			if = {
				limit = { has_country_leader_with_trait = XFR_federalist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = 0.05
				}
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_restaurationist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = -0.05
				}
			}
			
		}
	}

	XFR_support_integration_efforts = {

		icon = GFX_decision_SWI_support_humanitarian_efforts

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_social_reform
			any_controlled_state = {
				any_country_with_core = {
					NOT = { original_tag = ROOT }
				}
				NOT = { is_core_of = XFR }
			}
		}

		cost = 75

		priority = 8

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 70

		days_re_enable = 30

		modifier = {
			consumer_goods_factor = 0.1
			compliance_gain = 0.2
		}

		complete_effect = {
			
		}

		remove_effect = {
			if = {
				limit = { has_country_leader_with_trait = XFR_federalist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = 0.05
				}
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_restaurationist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = -0.05
				}
			}
			
		}
	}

	XFR_increase_marechaussee_budget = {

		icon = GFX_decision_generic_police_action

		allowed = {
			original_tag = XFR
		}

		available = {
			has_completed_focus = XFR_social_reform
			any_controlled_state = {
				any_country_with_core = {
					NOT = { original_tag = ROOT }
				}
				NOT = { is_core_of = XFR }
			}
		}

		cost = 75

		priority = 8

		fire_only_once = no

		ai_will_do = {
			factor = 1
		}

		visible = {
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		days_remove = 70

		days_re_enable = 30

		modifier = {
			consumer_goods_factor = 0.1
			resistance_growth = -0.1
		}

		complete_effect = {
			
		}

		remove_effect = {
			if = {
				limit = { has_country_leader_with_trait = XFR_federalist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = -0.05
				}
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_restaurationist_leader }
				add_power_balance_value = {
					id = XFR_federalists_restaurationists_bop
					value = 0.05
				}
			}
			
		}
	}

	XFR_move_to_paris  = { 
		
		icon = GFX_decision_SOV_place_hq

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 16
			}
		}

		available = {
			16 = {
				is_owned_and_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				OR = {
					compliance > 30
					is_core_of = ROOT
				}
			}
		}

		visible = { 
			has_government = democratic
			has_power_balance = { id = XFR_federalists_restaurationists_bop }
		}

		cancel_trigger = {
			NOT = {
				16 = {
					is_fully_controlled_by = ROOT
				}
			}
		}

		fire_only_once = yes

		cost = 100

		priority = 100

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			if = {
				limit = {
					16 = { NOT = { is_core_of = ROOt } }
				}
				16 = { add_core_of = ROOT }
			}
			set_capital  = { state = 16 }
			add_power_balance_value = {
				id = XFR_federalists_restaurationists_bop
				value = -0.1
			}
        }
	}

}

XAL_integration = {

	XAL_integrate_rhineland  = { 
		
		icon = GFX_decision_generic_pickelhaube

		allowed = {
			original_tag = XAL
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 42
				state = 983
			}
		}

		available = {
			42 = {
				is_owned_and_controlled_by = ROOT
			}
			983 = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = { 
			42 = { is_claimed_by = ROOT }
			983 = { is_claimed_by = ROOT }
			NOT = {
				42 = {
					is_core_of = ROOT
				}
				983 = {
					is_core_of = ROOT
				}
			}
		}

		cancel_trigger = {
			NOT = {
				OR = {
					42 = {
						is_owned_and_controlled_by = ROOT
					}
					983 = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 150

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			42 = {
				add_core_of = XAL
			}
			983 = {
				add_core_of = XAL
			}
			51 = {
				add_claim_by = XAL
			}
        }
	}

	XAL_integrate_hessen  = { 
		
		icon = GFX_decision_generic_pickelhaube

		allowed = {
			original_tag = XAL
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 55
			}
		}

		available = {
			55 = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = { 
			55 = { is_claimed_by = ROOT }
			NOT = {
				55 = {
					is_core_of = ROOT
				}
			}
		}

		cancel_trigger = {
			NOT = {
				OR = {
					55 = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 100

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			55 = {
				add_core_of = XAL
			}
        }
	}

	XAL_integrate_wuerttemberg  = { 
		
		icon = GFX_decision_generic_pickelhaube

		allowed = {
			original_tag = XAL
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 50
			}
		}

		available = {
			50 = {
				is_owned_and_controlled_by = ROOT
			}
		}

		visible = { 
			50 = { is_claimed_by = ROOT }
			NOT = {
				50 = {
					is_core_of = ROOT
				}
			}
		}

		cancel_trigger = {
			NOT = {
				OR = {
					50 = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 150

		days_remove = 150

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			50 = {
				add_core_of = XAL
			}
        }
	}

}

XFR_integration = {

	XFR_integrate_alsace_lorraine = { 
		
		icon = GFX_decision_generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_core_of = XAL
			}
		}

		available = {
			XAL = {
				all_core_state = {
					is_owned_and_controlled_by = ROOT
					compliance > 30
				}
			}
		}

		visible = { 
			XAL = {
				any_core_state = {
					is_owned_and_controlled_by = ROOT
				}
			}
			NOT = {
				XAL = {
					all_core_state = {
						is_core_of = ROOT
					}
				}
			}
		}

		cancel_trigger = {
			NOT = {
				XAL = {
					any_core_state = {
						is_owned_and_controlled_by = ROOT
					}
				}
			}
		}

		fire_only_once = yes

		cost = 100

		days_remove = 180

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = XAL
				}
				add_core_of = ROOT
			}
			XAL_characters_join_XFR = yes
        }
	}

	XFR_regain_french_territories = { 
		
		icon = GFX_decision_infiltrate_state

		allowed = {
			original_tag = XFR
		}

		state_target = yes

		available = {
			has_completed_focus = XFR_take_down_stragglers
		}

		visible = { 
			FROM = {
				any_neighbor_state = { owner = { tag = ROOT } }
				NOT = {
					owner = {
						OR = {
							is_ally_with = ROOT
							tag = ROOT
							tag = XAL
							tag = XAQ
							tag = XNF
							tag = XFW
						}					
					}
				}
				DEN_is_french_state = yes
				owner = {
					any_core_state = {
						NOT = { DEN_is_french_state = yes }
					}
				}
			}
		}

		on_map_mode = map_and_decisions_view

		fire_only_once = no

		cost = 50

		days_re_enable = 100

        ai_will_do = {
			base = 100
		}

		complete_effect = {
			FROM = { save_event_target_as = demanded_prov_target }
			FROM = {
				owner = {
					country_event = { id = generic.23 days = 1 }
				}
			}
		}
	
	}

	XFR_french_anarchy_annex = { # THIS IS TEMPORARY
		
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_owned_and_controlled_by = XFW
			}
		}

		available = {
			has_completed_focus = XFR_take_down_stragglers
			XNF = {
				exists = no
			}
			
		}

		target_trigger = { 
			FROM = { original_tag = XFW }
		}

		visible = { 
			FROM = {
				original_tag = XFW
			}
			
		}

		on_map_mode = map_and_decisions_view

		fire_only_once = yes

		days_remove = 70

		cost = 100

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}

		remove_effect = {
			FROM = {
				every_owned_state = {
					transfer_state_to = ROOT
				}
			}
		}
	
	}


	XFR_restore_french_republic = { 
		
		icon = generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				DEN_is_french_state = yes
			}
		}

		available = {
			DEN_controls_french_states = yes
		}

		visible = { 
			
		}

		cancel_trigger = {
			
		}

		fire_only_once = yes

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}

		complete_effect = {
			set_country_flag = XFR_is_france
			every_state = {
				limit = { DEN_is_french_state = yes }
				add_core_of = ROOT
			}
			set_cosmetic_tag = XFR_FRANCE_TEMP
			if = {
				limit = { has_country_leader_with_trait = XFR_federalist_leader }
				add_power_balance_modifier = {
    				id = XFR_federalists_restaurationists_bop
    				modifier = XFR_united_france_federalists
				}
			}
			if = {
				limit = { has_country_leader_with_trait = XFR_restaurationist_leader }
				add_power_balance_modifier = {
    				id = XFR_federalists_restaurationists_bop
    				modifier = XFR_united_france_restaurationists
				}
			}
			hidden_effect = {
				news_event = { id = XFR_news_events.8 }
			}
			hidden_effect = {
				every_other_country = {
					limit = { has_cosmetic_tag = XFR_puppet }
					set_cosmetic_tag = XFR_puppet_FRANCE
				}
			}
		}
	
	}

}

prospect_for_resources = {
	XFR_develop_burgundy_aluminum = { #27

		icon = aluminium

		allowed = {

		}

		highlight_states = {
			highlight_state_targets = {
				state = 27
			}
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 27
			controls_state = 27
		}

		visible = {
			has_tech = excavation1
			owns_state = 27
			controls_state = 27
			27 = {
				NOT = {
					has_state_flag = burgundy_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			base = 0.3
			modifier = {  # Too low PP
				factor = 0.5
					has_political_power < 80
			}
			modifier = { #We have plenty of PP, avanti!
				factor = 3
				has_political_power > 200
			}
			modifier = { #Running out of the stuff, need more!
				factor = 5
				has_resources_in_country = {
					resource = aluminium
					amount < 1
				}
			}
		}
		remove_effect = {
			27 = { set_state_flag = burgundy_aluminium_developed }
			27 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}

}

XFR_francia_cat = {

	XFR_show_west_francia = { 
		
		icon = generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				XFR_is_west_francian_state = yes
			}
		}

		on_map_mode = decision_view_only

		available = {
			XFR_controls_west_francian_states = yes
		}

		visible = { 
			NOT = { XFR_controls_west_francian_states = yes }
		}

		fire_only_once = yes

		complete_effect = {
			unlock_national_focus = XFR_west_francia_restored
		}
	
	}

	XFR_show_middle_francia = { 
		
		icon = generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				XFR_is_middle_francian_state = yes
			}
		}

		on_map_mode = decision_view_only

		available = {
			XFR_controls_middle_francian_states = yes
		}

		visible = { 
			NOT = { XFR_controls_middle_francian_states = yes }
		}

		fire_only_once = yes

		complete_effect = {
			unlock_national_focus = XFR_middle_francia_restored
		}
	
	}

	XFR_show_east_francia = { 
		
		icon = generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				XFR_is_east_francian_state = yes
			}
		}

		on_map_mode = decision_view_only

		available = {
			XFR_controls_east_francian_states = yes
		}

		visible = { 
			NOT = { XFR_controls_east_francian_states = yes }
		}

		fire_only_once = no

		complete_effect = {
			unlock_national_focus = XFR_east_francia_restored
		}
	
	}

	XFR_show_francia = { 
		
		icon = generic_form_nation

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				OR = {
					XFR_is_west_francian_state = yes
					XFR_is_middle_francian_state = yes
					XFR_is_east_francian_state = yes
				}
				
			}
		}

		on_map_mode = decision_view_only

		available = {
			XFR_controls_west_francian_states = yes
			XFR_controls_middle_francian_states = yes
			XFR_controls_east_francian_states = yes
		}

		visible = { 
			has_completed_focus = XFR_restore_the_francian_empire
			NOT = { has_completed_focus = XFR_all_hail_kaiser_julius }
		}

		fire_only_once = no

		complete_effect = {
			unlock_national_focus = XFR_all_hail_kaiser_julius
		}
	
	}

	XFR_french_anarchy_annex2 = { # THIS IS TEMPORARY
		
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_owned_and_controlled_by = XFW
			}
		}

		available = {
			has_completed_focus = XFR_rhone_expedition2
			XNF = {
				exists = no
			}
			
		}

		target_trigger = { 
			FROM = { original_tag = XFW }
		}

		visible = { 
			FROM = {
				original_tag = XFW
			}
			
		}

		on_map_mode = map_and_decisions_view

		fire_only_once = yes

		cost = 100

		days_remove = 70

		#days_re_enable = 180

        ai_will_do = {
			base = 100
		}

		remove_effect = {
			FROM = {
				every_owned_state = {
					transfer_state_to = ROOT
				}
			}
		}
	
	}

}

XFR_reclamation = {

	XFR_reclaim_land_from_anarchy = {
		
		icon = GFX_decision_generic_forestry

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 99 }
		}
		custom_cost_text = decision_cost_100_guns

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_reclaimable_state = yes
				any_neighbor_state = { controls_or_subject_of = yes }
				is_owned_and_controlled_by = LIB
			}
		}

		available = {
			FROM = { any_neighbor_state = { controls_or_subject_of = yes } }
		}

		visible = {

		}

		ai_will_do = {
			base = 100
		}

		cancel_trigger = {
			FROM = { NOT = { is_owned_and_controlled_by = LIB } }
		}


		targets_dynamic = yes

		state_target = yes

		on_map_mode = map_and_decisions_view  

		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = LIB
				any_neighbor_state = { controls_or_subject_of = yes }
				is_reclaimable_state = yes
			}
		}

		days_remove = 30

		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
    				type = infantry_equipment
    				amount = -100
				}
			}
		}

		remove_effect = {
			FROM = { transfer_state_to = ROOT }
		}
	}

}

XFR_intervention = {

	XFR_topple_italian_monarchy = { 
		
		icon = GFX_decision_eng_support_imperialist_coup

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_controlled_by = XIT
			}
		}

		on_map_mode = decision_view_only

		available = {
			XIT = {
				any_neighbor_country = {
					OR = {
						is_ally_with = ROOT
						tag = ROOT
					}
				}
			}
		}

		visible = { 
			XIT = {
				NOT = { is_ally_with = ROOT }
				NOT = { has_war_with = ROOT }
				has_government = neutrality
			}
		}
		
		cost = 100

		fire_only_once = yes

		war_with_on_remove = XIT

		days_remove = 35

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				strength_ratio = {
    				tag = XIT
    				ratio > 1
				}
			}
		}

		remove_effect = {
			create_wargoal = {
				target = XIT
				type = puppet_wargoal_focus
			}
		}
	
	}

	XFR_south_german_expedition = { 
		
		icon = GFX_decision_generic_prepare_civil_war

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_controlled_by = XOO
			}
		}

		on_map_mode = decision_view_only

		available = {
			XOO = {
				any_neighbor_country = {
					OR = {
						is_ally_with = ROOT
						tag = ROOT
					}
				}
			}
		}

		visible = { 
			XOO = {
				NOT = { is_ally_with = ROOT }
				NOT = { has_war_with = ROOT }
			}
		}
		
		cost = 100

		fire_only_once = yes

		war_with_on_remove = XOO

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				strength_ratio = {
    				tag = XOO
    				ratio > 1
				}
			}
		}

		days_remove = 35

		remove_effect = {
			create_wargoal = {
				target = XOO
				type = puppet_wargoal_focus
			}
		}
	
	}

	XFR_war_against_nazis = { 
		
		icon = GFX_decision_oppression

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_controlled_by = XLH
			}
		}

		on_map_mode = decision_view_only

		available = {
			XLH = {
				any_neighbor_country = {
					OR = {
						is_ally_with = ROOT
						tag = ROOT
					}
				}
			}
		}

		visible = { 
			XLH = {
				NOT = { is_ally_with = ROOT }
				NOT = { has_war_with = ROOT }
			}
		}
		
		cost = 100

		fire_only_once = yes

		war_with_on_remove = XLH

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				strength_ratio = {
    				tag = XLH
    				ratio > 1
				}
			}
		}

		days_remove = 35

		remove_effect = {
			create_wargoal = {
				target = XLH
				type = puppet_wargoal_focus
			}
		}
	
	}

	XFR_attack_hamburg = { 
		
		icon = GFX_decision_generic_protection

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_controlled_by = XSH
			}
		}

		on_map_mode = decision_view_only

		available = {
			XSH = {
				any_neighbor_country = {
					OR = {
						is_ally_with = ROOT
						tag = ROOT
					}
				}
			}
		}

		visible = { 
			XSH = {
				NOT = { is_ally_with = ROOT }
				NOT = { has_war_with = ROOT }
			}
		}
		
		cost = 100

		fire_only_once = yes

		war_with_on_remove = XSH

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				strength_ratio = {
    				tag = XSH
    				ratio > 1
				}
			}
		}

		days_remove = 35

		remove_effect = {
			create_wargoal = {
				target = XSH
				type = puppet_wargoal_focus
			}
		}
	
	}

	XFR_war_against_knights = { 
		
		icon = GFX_decision_generic_prepare_civil_war

		allowed = {
			original_tag = XFR
		}

		highlight_states = { 
			highlight_states_trigger = {
				is_controlled_by = XHP
			}
		}

		on_map_mode = decision_view_only

		available = {
			XHP = {
				any_neighbor_country = {
					OR = {
						is_ally_with = ROOT
						tag = ROOT
					}
				}
			}
		}

		visible = { 
			XHP = {
				NOT = { is_ally_with = ROOT }
				NOT = { has_war_with = ROOT }
				has_government = fascism
			}
		}
		
		cost = 100

		fire_only_once = yes

		war_with_on_remove = XHP

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				strength_ratio = {
    				tag = XHP
    				ratio > 1
				}
			}
		}

		days_remove = 35

		remove_effect = {
			create_wargoal = {
				target = XHP
				type = puppet_wargoal_focus
			}
		}
	
	}

}

demobilization = {

	XFR_remove_lotharingian_militias = { 
		
		icon = GFX_decision_generic_prepare_civil_war

		allowed = {
			NOT = { tag = XFR }
		}

		available = {
			has_template_majority_unit = militia
		}

		visible = { 
			has_template = "Lotharingian Militia"
		}
		
		cost = 50

		fire_only_once = yes

		ai_will_do = {
			base = 10
		}

		complete_effect = {
			delete_unit_template_and_units = {
				division_template = "Lotharingian Militia"
				disband = no
			}
		}
	
	}

	XFR_remove_english_militias = { 
		
		icon = GFX_decision_generic_prepare_civil_war

		allowed = {
			always = yes
		}

		available = {
			has_template_majority_unit = militia
			NOT = { has_war_with = XNE }
		}

		visible = { 
			has_template = "Anti-English Militia"
		}
		
		cost = 50

		fire_only_once = yes

		ai_will_do = {
			base = 10
		}

		complete_effect = {
			delete_unit_template_and_units = {
				division_template = "Anti-English Militia"
				disband = no
			}
		}
	
	}

}
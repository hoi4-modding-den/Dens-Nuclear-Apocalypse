
add_namespace = XFR_events
add_namespace = XFR_news_events
add_namespace = XFR_diplo_events


country_event = { # Activate the Centre Crisis
    id = XFR_events.1
    title = XFR_events.1.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.1.desc
    
    trigger = {
		date > 2236.1.7
		date < 2236.1.21
        original_tag = XFR
		country_exists = XFR
	}

    fire_only_once = yes
    
    option = {
        name = XFR_events.1.a
        set_country_flag = XFR_centre_crisis_timer_activated
        add_stability = -0.02
        custom_effect_tooltip = XFR_events.1.a.tt
    }
}

country_event = { # Centre Crisis escalates
    id = XFR_events.2
    title = XFR_events.2.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.2.desc
    
    is_triggered_only = yes
    fire_only_once = yes
    
    option = {
        name = XFR_events.2.a
        hidden_effect = {
            news_event = { id = XFR_news_events.2 }
            24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
        }
        unlock_national_focus = XFR_crisis_averted
        remove_ideas = XFR_chaos_in_centre
        add_timed_idea = {
            idea = XFR_chaos_in_centre2
            days = 365
        }
        
       
    }
}

country_event = { # Rhone Border War lost
    id = XFR_events.3
    title = XFR_events.3.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.3.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.3.a
        trigger = {
            original_tag = XFR
        }
    
    }

    option = {
        name = XFR_events.4.a
        trigger = {
            NOT = { original_tag = XFR }
        }
    
    }
}

country_event = { # Rhone Border War won
    id = XFR_events.4
    title = XFR_events.4.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.4.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.4.a
        trigger = {
            original_tag = XFR
        }
        973 = {
            transfer_state_to = XFR
        }
    
    }

    option = {
        name = XFR_events.3.a
        trigger = {
            NOT = { original_tag = XFR }
        }
    
    }
}

country_event = { # recalled military support to XAL
    id = XFR_events.5
    title = XFR_events.5.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.5.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.5.a
    
    }
}

country_event = { # XFR wants to annex XAL
    id = XFR_events.6
    title = XFR_events.6.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.6.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.6.a
        ai_chance = {
            base = 1
            modifier = {
                add = 4
                is_guaranteed_by = XFR
            }
            modifier = {
                factor = 2
                has_opinion = { target = XFR value > 79 }
            }
            modifier = {
                factor = 5
                is_subject_of = XFR
            }
        }
        XFR = { country_event = { id = XFR_events.9 days = 1 } }
        effect_tooltip = {
            XFR = {
                annex_country = {
    	        	target = XAL
    	           	transfer_troops = no
		        }
            }
		    every_state = {
		    	limit = { is_core_of = XAL }
		    	add_core_of = XFR
		    }
        }
        custom_effect_tooltip = GAME_OVER_TT
    }

    option = {
        name = XFR_events.6.b
        ai_chance = {
            base = 1
        }
        XFR = { country_event = { id = XFR_events.8 days = 1 } }
        effect_tooltip = {
            XFR = {
            declare_war_on = {
                target = XAL
                type = annex_everything
            }
        }
        }
    }
}

country_event = { # Elections 2236
    id = XFR_events.7
    title = XFR_events.7.t
    picture = GFX_report_event_election_vote
    desc = XFR_events.7.desc

    trigger = {
		tag = XFR
        XFR = { has_completed_focus = XFR_support_parliament }
		date > 2236.1.1
		date < 2237.1.1
	}
    
    is_triggered_only = yes

    immediate = {
        hidden_effect = { complete_national_focus = XFR_elections }
        set_country_flag = XFR_2236_elections_over
    }
    
    option = {
        name = XFR_events.7.a
        ai_chance = {
            base = 1
        }

    }

    option = {
        name = XFR_events.7.b
        ai_chance = {
            base = 1
        }

    }

}

country_event = { # XFR wants to annex XAL -> XAL declines
    id = XFR_events.8
    title = XFR_events.8.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.8.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.8.a
        ai_chance = {
            base = 1
        }
        if = {
            limit = { XAL = { is_subject_of = ROOT }}
            end_puppet = XAL
        }
        declare_war_on = {
            target = XAL
            type = annex_everything
        }
    }
}

country_event = { # XFR wants to annex XAL -> XAL accepts
    id = XFR_events.9
    title = XFR_events.9.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.9.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.9.a
        ai_chance = {
            base = 1
        }
        annex_country = {
    		target = XAL
    		transfer_troops = no
		}
		every_state = {
			limit = { is_core_of = XAL }
			add_core_of = XFR
		}
    }
}

country_event = { # XAL wants to become XFR puppet
    id = XFR_events.10
    title = XFR_events.10.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.10.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.10.a
        ai_chance = {
            base = 100
        }
        give_guarantee = XAL
        if = {
			limit = { XFR = { has_government = fascism } }
				XFR = {
					set_autonomy = {
    					target = XAL
    					autonomous_state = autonomy_reichsprotectorate
    					end_wars = no
    					end_civil_wars = no
					}
				}
			}
			if = {
				limit = { XFR = { NOT = { has_government = fascism } } }
				XFR = {
					set_autonomy = {
    					target = XAL
    					autonomous_state = autonomy_puppet
    					end_wars = no
    					end_civil_wars = no
					}
				}
			}
    }

    option = {
        name = XFR_events.10.b
        ai_chance = {
            base = 1
        }
        XAL = { country_event = { id = XFR_events.11 days = 1 } }
    }
}

country_event = { # XFR rejects (WHY?)
    id = XFR_events.11
    title = XFR_events.11.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.11.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.11.a
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = XFR
            modifier = XFR_refused_to_protect
        }
    }
}


# NEWS EVENTS #

news_event = { # Centre Crisis resolved
    id = XFR_news_events.1
    title = XFR_news_events.1.t
    picture = GFX_news_event_military_planning
    desc = XFR_news_events.1.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.1.a
    }

}

news_event = { # Centre Crisis escalates
    id = XFR_news_events.2
    title = XFR_news_events.2.t
    picture = GFX_news_event_nuke
    desc = XFR_news_events.2.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.2.a
    }

}


add_namespace = XFR_events
add_namespace = XFR_news_events
add_namespace = XFR_diplo_events


country_event = { # Activate the Centre Crisis
    id = XFR_events.1
    title = XFR_events.1.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.1.desc
    
    trigger = {
		date > 2236.1.7
		date < 2236.1.21
        original_tag = XFR
		country_exists = XFR
	}

    fire_only_once = yes
    
    option = {
        name = XFR_events.1.a
        set_country_flag = XFR_centre_crisis_timer_activated
        add_stability = -0.02
        custom_effect_tooltip = XFR_events.1.a.tt
    }
}

country_event = { # Centre Crisis escalates
    id = XFR_events.2
    title = XFR_events.2.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.2.desc
    
    is_triggered_only = yes
    fire_only_once = yes
    
    option = {
        name = XFR_events.2.a
        hidden_effect = {
            news_event = { id = XFR_news_events.2 }
            24 = { remove_dynamic_modifier = { modifier = XFR_mutant_state_modifier } }
        }
        unlock_national_focus = XFR_crisis_averted
        remove_ideas = XFR_chaos_in_centre
        add_timed_idea = {
            idea = XFR_chaos_in_centre2
            days = 365
        }
        
       
    }
}

country_event = { # Rhone Border War lost
    id = XFR_events.3
    title = XFR_events.3.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.3.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.3.a
        trigger = {
            original_tag = XFR
        }
    
    }

    option = {
        name = XFR_events.4.a
        trigger = {
            NOT = { original_tag = XFR }
        }
    
    }
}

country_event = { # Rhone Border War won
    id = XFR_events.4
    title = XFR_events.4.t
    picture = GFX_report_event_ger_civil_war
    desc = XFR_events.4.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.4.a
        trigger = {
            original_tag = XFR
        }
        973 = {
            transfer_state_to = XFR
        }
    
    }

    option = {
        name = XFR_events.3.a
        trigger = {
            NOT = { original_tag = XFR }
        }
    
    }
}

country_event = { # recalled military support to XAL
    id = XFR_events.5
    title = XFR_events.5.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.5.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.5.a
    
    }
}

country_event = { # XFR wants to annex XAL
    id = XFR_events.6
    title = XFR_events.6.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.6.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.6.a
        ai_chance = {
            base = 1
            modifier = {
                add = 4
                is_guaranteed_by = XFR
            }
            modifier = {
                factor = 2
                has_opinion = { target = XFR value > 79 }
            }
            modifier = {
                factor = 5
                is_subject_of = XFR
            }
        }
        XFR = { country_event = { id = XFR_events.9 days = 1 } }
        effect_tooltip = {
            XFR = {
                annex_country = {
    	        	target = XAL
    	           	transfer_troops = no
		        }
            }
		    every_state = {
		    	limit = { is_core_of = XAL }
		    	add_core_of = XFR
		    }
        }
        custom_effect_tooltip = GAME_OVER_TT
    }

    option = {
        name = XFR_events.6.b
        ai_chance = {
            base = 1
            modifier = {
                add = 2
                has_idea = neutrality_idea
            }
            modifier = {
                add = 1
                XFR = { NOT = { has_government = ROOT } }
            }
        }
        XFR = { country_event = { id = XFR_events.8 days = 1 } }
        effect_tooltip = {
            XFR = {
            declare_war_on = {
                target = XAL
                type = annex_everything
            }
        }
        }
    }
}

country_event = { # Elections 2236
    id = XFR_events.7
    title = XFR_events.7.t
    picture = GFX_report_event_election_vote
    desc = XFR_events.7.desc

    trigger = {
		tag = XFR
        XFR = { has_completed_focus = XFR_support_parliament }
		date > 2236.1.1
		date < 2237.1.1
	}
    
    is_triggered_only = yes

    immediate = {
        hidden_effect = { complete_national_focus = XFR_elections }
        set_country_flag = XFR_2236_elections_over
    }
    
    option = {
        name = XFR_events.7.a
        ai_chance = {
            base = 1
        }
        hidden_effect = { retire_ideology_leader = democratic }
        add_country_leader_role = {
            character = XFR_jacob_d_amboise
            promote_leader = yes
            country_leader = {
                ideology = socialism
                desc = XFR_jacob_d_amboise_desc
                expire = "3000.1.1"
            traits = { XFR_federalist_leader }
            }
        }
        set_party_name = {
            ideology = democratic
            long_name = XFR_democratic_party_federalists_long
            name = XFR_democratic_party_federalists
        }   
        set_power_balance = {
            id = XFR_federalists_restaurationists_bop
            left_side = XFR_restaurationist_side
            right_side = XFR_federalist_side
            set_value = 0.15
        }

    }

    option = {
        name = XFR_events.7.b
        ai_chance = {
            base = 1
        }
        hidden_effect = { retire_ideology_leader = democratic }
        add_country_leader_role = {
            character = XFR_gabriel_moreau
            promote_leader = yes
            country_leader = {
                ideology = liberalism
                desc = XFR_gabriel_moreau_desc
                expire = "3000.1.1"
            traits = { XFR_restaurationist_leader }
            }
        }
        set_party_name = {
            ideology = democratic
            long_name = XFR_democratic_party_restauration_long
            name = XFR_democratic_party_restauration
        }       
        set_power_balance = {
            id = XFR_federalists_restaurationists_bop
            left_side = XFR_restaurationist_side
            right_side = XFR_federalist_side
            set_value = -0.15
        }

    }

}

country_event = { # XFR wants to annex XAL -> XAL declines
    id = XFR_events.8
    title = XFR_events.8.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.8.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.8.a
        ai_chance = {
            base = 1
        }
        if = {
            limit = { XAL = { is_subject_of = ROOT }}
            end_puppet = XAL
        }
        declare_war_on = {
            target = XAL
            type = annex_everything
        }
    }
}

country_event = { # XFR wants to annex XAL -> XAL accepts
    id = XFR_events.9
    title = XFR_events.9.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.9.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.9.a
        ai_chance = {
            base = 1
        }
        annex_country = {
    		target = XAL
    		transfer_troops = yes
		}
        hidden_effect = {
            delete_units = {
				division_template = "Brigade des Volontaires Bourguignons"
				disband = yes
			}
        }
		every_state = {
			limit = { is_core_of = XAL }
			add_core_of = XFR
		}
        XAL_characters_join_XFR = yes
    }
}

country_event = { # XAL wants to become XFR puppet
    id = XFR_events.10
    title = XFR_events.10.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.10.desc
    
    is_triggered_only = yes
    
    option = {
        name = XFR_events.10.a
        ai_chance = {
            base = 100
        }
        give_guarantee = XAL
        if = {
			limit = { XFR = { has_government = fascism } }
				XFR = {
					set_autonomy = {
    					target = XAL
    					autonomous_state = autonomy_reichsprotectorate
    					end_wars = no
    					end_civil_wars = no
					}
				}
			}
		if = {
			limit = { XFR = { NOT = { has_government = fascism } } }
			XFR = {
				set_autonomy = {
    				target = XAL
    				autonomous_state = autonomy_puppet
    				end_wars = no
    				end_civil_wars = no
				}
			}
		}
    }

    option = {
        name = XFR_events.10.b
        ai_chance = {
            base = 1
        }
        XAL = { country_event = { id = XFR_events.11 days = 1 } }
    }
}

country_event = { # XFR rejects (WHY?)
    id = XFR_events.11
    title = XFR_events.11.t
    picture = GFX_report_event_generic_peaceful_annexation
    desc = XFR_events.11.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.11.a
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = XFR
            modifier = XFR_refused_to_protect
        }
    }
}

country_event = { # XFR proposes easing of customs barrier
    id = XFR_events.12
    title = XFR_events.12.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.12.desc
    
    is_triggered_only = yes

    option = { # accept
        name = XFR_events.12.a
        ai_chance = {
            base = 1
            modifier = {
                factor = 2
                has_government = democratic
            }
            modifier = {
                add = 3
                has_opinion = { target = XFR value > 19 }
            }
            modifier = {
                add = 2
                has_opinion = { target = XFR value > 49 }
            }
            modifier = {
                add = 5
                is_ally_with = XFR
            }
            modifier = {
                add = 1
                XFR = { is_faction_leader = yes }
            }
            modifier = {
                factor = 1000
                is_subject_of = XFR
            }
        }
        XFR = { country_event = { id = XFR_events.13 days = 2 random_hours = 12 random_days = 1 } }
        effect_tooltip = {
            XFR = {
                add_opinion_modifier = {
                    target = ROOT
                    modifier = XFR_accepted_customs
                }
            }
        }
        add_ai_strategy = {
            type = befriend
            id = XFR
            value = 50
        }
        add_ai_strategy = {
            type = equipment_market_trade_desire
            value = 50
        }
        add_ideas = XFR_customs_agreement_idea
        hidden_effect = {
				if = {
           		limit = {
            		XFR = { NOT = { has_idea = XFR_customs_agreement_head_idea } }
            		}
            		XFR = { add_ideas = XFR_customs_agreement_head_idea }
                    news_event = { id = XFR_news_events.4 }
        		}
			}
    }
    option = { # decline
        name = XFR_events.12.b
        ai_chance = {
            base = 2
        }
        XFR = { country_event = { id = XFR_events.14 days = 2 random_hours = 12 random_days = 1 } }
        effect_tooltip = {
            XFR = {
                add_opinion_modifier = {
                    target = ROOT
                    modifier = XFR_rejected_customs
                }
            }
        }
    }
}

country_event = { # country accepts customs agreement
    id = XFR_events.13
    title = XFR_events.13.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.13.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.13.a
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = FROM
            modifier = XFR_accepted_customs
        }
        add_power_balance_value = {
			id = XFR_federalists_restaurationists_bop
			value = 0.025
		}
    }
}

country_event = { # country rejects customs agreement
    id = XFR_events.14
    title = XFR_events.14.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.14.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.14.a
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = FROM
            modifier = XFR_rejected_customs
        }
    }
}

country_event = { # country kicked from UDB
    id = XFR_events.15
    title = XFR_events.15.t
    picture = GFX_report_event_generic_sign_treaty1
    desc = XFR_events.15.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.15.a
        ai_chance = {
            base = 1
        }
    }
}

country_event = { # XFR notification about Nationalist Coup
    id = XFR_events.16
    title = XFR_events.16.t
    picture = GFX_report_event_fascist_speech
    desc = XFR_events.16.desc
    
    is_triggered_only = yes

    option = {
        name = XFR_events.16.a
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = XAL
            modifier = XFR_isolate_fascists
        }
        add_ai_strategy = {
            type = antagonize
            id = XAL
            value = -100
        }
        upgrade_economy_law = yes
        add_war_support = 0.05
        send_embargo = XAL
    }
    option = {
        name = XFR_events.16.b
        ai_chance = {
            base = 1
        }
        add_opinion_modifier = {
            target = XAL
            modifier = XFR_isolate_fascists
        }
        add_ai_strategy = {
            type = antagonize
            id = XAL
            value = -100
        }
        add_political_power = 200
        send_embargo = XAL
    }
}

country_event = { # Paris Conference: Choose Goal
    id = XFR_events.17
    title = XFR_events.17.t
    picture = GFX_report_event_generic_sign_treaty1
    desc = XFR_events.17.desc
    
    is_triggered_only = yes

    option = { # demand puppet
        name = XFR_events.17.a
        ai_chance = {
            base = 10
        }
        set_global_flag = XFR_paris_con_puppet
        add_power_balance_value = {
			id = XFR_federalists_restaurationists_bop
			value = 0.05
		}
        XPR = { country_event = { id = XFR_events.18 days = 1 } }
        custom_effect_tooltip = if_they_accept_tt
        effect_tooltip = {
                XFR = {
		    	    set_autonomy = {
    		          	target = XPR
    		        	autonomous_state = autonomy_integrated_puppet
    		    	    end_wars = no
    		    	    end_civil_wars = no
    		    	}
	    	    }
            }
        
    }
    option = { # demand puppet and direct control of paris
        name = XFR_events.17.b
        ai_chance = {
            base = 5
        }
        set_global_flag = XFR_paris_con_puppet
        set_global_flag = XFR_paris_con_transfer
        XPR = { country_event = { id = XFR_events.18 days = 1 } }
        custom_effect_tooltip = if_they_accept_tt
        effect_tooltip = { 16 = { transfer_state_to = ROOT add_core_of = ROOT } }
        effect_tooltip = {
                XFR = {
		    	    set_autonomy = {
    		          	target = XPR
    		        	autonomous_state = autonomy_integrated_puppet
    		    	    end_wars = no
    		    	    end_civil_wars = no
    		    	}
	    	    }
            }
    }

    option = { # demand direct control of paris
        name = XFR_events.17.c
        ai_chance = {
            base = 1
        }
        set_global_flag = XFR_paris_con_transfer
        add_power_balance_value = {
			id = XFR_federalists_restaurationists_bop
			value = -0.05
		}
        XPR = { country_event = { id = XFR_events.18 days = 1 } }
        custom_effect_tooltip = if_they_accept_tt
        effect_tooltip = { 16 = { transfer_state_to = ROOT add_core_of = ROOT } }
        
    }
}

country_event = { # Paris Conference: Message for XPR
    id = XFR_events.18
    title = XFR_events.18.t
    picture = GFX_report_event_generic_sign_treaty1
    desc = XFR_events.18.desc
    
    is_triggered_only = yes

    option = { # accept
        name = XFR_events.18.a
        ai_chance = {
            base = 2
            modifier = {
                NOT = { has_global_flag = XFR_paris_con_transfer }
                add = 1
            }
            modifier = {
                add = 2
                ROOT = { is_guaranteed_by = XFR }
            }
            modifier = {
                factor = 1.5
                has_opinion = { target = XFR value > 49 }
            }
            modifier = {
                add = 2
                has_idea = XFR_customs_agreement_idea
            }
            modifier = {
                add = 1
                democratic > 0.24
            }
        }
        if = {
            limit = {
                has_global_flag = XFR_paris_con_transfer
            }
            effect_tooltip = { 16 = { transfer_state_to = XFR add_core_of = XFR } }
        }
        if = {
            limit = {
                has_global_flag = XFR_paris_con_puppet
            }
	    	effect_tooltip = {
                XFR = {
		    	    set_autonomy = {
    		          	target = XPR
    		        	autonomous_state = autonomy_integrated_puppet
    		    	    end_wars = no
    		    	    end_civil_wars = no
    		    	}
	    	    }
            }
        }
        XFR = { country_event = { id = XFR_events.19 days = 1 } }
    }
    option = { # reject
        name = XFR_events.18.b
        ai_chance = {
            base = 2
            modifier = {
                has_global_flag = XFR_paris_con_transfer
                add = 5
            }
        }
        XFR = { country_event = { id = XFR_events.20 days = 1 } }
    }
}

country_event = { # Paris Conference: XPR accepts
    id = XFR_events.19
    title = XFR_events.19.t
    picture = GFX_report_event_generic_sign_treaty2
    desc = XFR_events.19.desc
    
    is_triggered_only = yes

    option = { 
        name = XFR_events.19.a
        ai_chance = {
            base = 1
        }
        if = {
            limit = {
                has_global_flag = XFR_paris_con_transfer
            }
            16 = {
                transfer_state_to = ROOT 
                add_core_of = ROOT
            }
        }
        if = {
            limit = {
                has_global_flag = XFR_paris_con_puppet
            }
	    	XFR = {
		    	set_autonomy = {
    		    	target = XPR
    		       	autonomous_state = autonomy_integrated_puppet
    			    end_wars = no
    			    end_civil_wars = no
    			}
	    	}
        }
        add_stability = 0.05
    }
}

country_event = { # Paris Conference: XPR rejects
    id = XFR_events.20
    title = XFR_events.20.t
    picture = GFX_report_event_military_planning
    desc = XFR_events.20.desc
    
    is_triggered_only = yes

    option = { 
        name = XFR_events.20.a
        ai_chance = {
            base = 1
        }
        create_wargoal = {
			target = XPR
			type = take_state_focus
			generator = { 16 }
		}
        add_war_support = 0.05
    }
}

# NEWS EVENTS #

news_event = { # Centre Crisis resolved
    id = XFR_news_events.1
    title = XFR_news_events.1.t
    picture = GFX_news_event_military_planning
    desc = XFR_news_events.1.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.1.a
    }

}

news_event = { # Centre Crisis escalates
    id = XFR_news_events.2
    title = XFR_news_events.2.t
    picture = GFX_news_event_nuke
    desc = XFR_news_events.2.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.2.a
    }

}

news_event = { # Coup in Alsace
    id = XFR_news_events.3
    title = XFR_news_events.3.t
    picture = GFX_news_event_fascist_gathering
    desc = XFR_news_events.3.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.3.a
        trigger = {
            NOT = { has_government = fascism }
            NOT = { tag = XFR }
            NOT = { tag = XAL }
            NOT = { tag = XRP }
        }
    }
    option = {
        name = XFR_news_events.3.b
        trigger = {
            has_government = fascism
            NOT = { tag = XFR }
            NOT = { tag = XAL }
            NOT = { tag = XRP }
        }
    }
    option = {
        name = XFR_news_events.3.c
        trigger = {
            tag = XFR
        }
    }

    option = {
        name = XFR_news_events.3.d
        trigger = {
            tag = XAL
        }
        42 = { add_claim_by = ROOT }
        983 = { add_claim_by = ROOT }
        add_ai_strategy = {
            type = conquer
            id = XRP
            value = 100
        }
        add_opinion_modifier = {
			target = XRP
    		modifier = XFR_hostility
		}
    }

    option = {
        name = XFR_news_events.3.d
        trigger = {
            tag = XRP
        }
        effect_tooltip = {
            42 = { add_claim_by = XAL }
        983 = { add_claim_by = XAL }
        }
        add_ai_strategy = {
            type = consider_weak
            id = XRP
            value = 50
        }
        add_opinion_modifier = {
			target = XAL
    		modifier = XFR_hostility
		}
    }

}

news_event = { # UDB announced
    id = XFR_news_events.4
    title = XFR_news_events.4.t
    picture = GFX_news_event_generic_sign_treaty2
    desc = XFR_news_events.4.desc
    
    
    is_triggered_only = yes

    major = yes
    
    option = {
        name = XFR_news_events.4.a
    }

}